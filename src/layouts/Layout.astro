---
import "@fontsource/inter";

interface Props {
    title: string;
    description?: string;
}

const {
    title,
    description = "Servicio de limpieza profesional para casas y oficinas en la IV Región. Personal de confianza, precios accesibles y garantía de satisfacción.",
} = Astro.props;
---

<!doctype html>
<html lang="es" class="scroll-smooth">
    <head>
        <meta charset="UTF-8" />
        <meta name="description" content={description} />
        <meta name="viewport" content="width=device-width" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <meta name="generator" content={Astro.generator} />
        <title>{title}</title>

        <!-- SEO & Open Graph -->
        <meta
            name="keywords"
            content="limpieza de casas, aseo oficina, limpieza industrial, co-star, la serena, coquimbo, iv región, clearhome, servicios de limpieza"
        />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="https://www.clearhome.cl/" />
        <meta property="og:title" content={title} />
        <meta property="og:description" content={description} />
        <meta
            property="og:image"
            content="https://www.clearhome.cl/images/hero-1.png"
        />
        <meta property="twitter:card" content="summary_large_image" />
        <meta property="twitter:url" content="https://www.clearhome.cl/" />
        <meta property="twitter:title" content={title} />
        <meta property="twitter:description" content={description} />
        <meta
            property="twitter:image"
            content="https://www.clearhome.cl/images/hero-1.png"
        />

        <!-- JSON-LD Structured Data (LocalBusiness) -->
        <script type="application/ld+json" is:inline>
            {
                "@context": "https://schema.org",
                "@type": "LocalBusiness",
                "name": "ClearHome Servicios de Limpieza",
                "image": "https://www.clearhome.cl/images/hero-1.png",
                "description": "Servicio de limpieza profesional para casas y oficinas en la IV Región. Personal de confianza y garantía de satisfacción.",
                "address": {
                    "@type": "PostalAddress",
                    "addressRegion": "Coquimbo",
                    "addressCountry": "CL"
                },
                "geo": {
                    "@type": "GeoCoordinates",
                    "latitude": "-29.9027",
                    "longitude": "-71.2520"
                },
                "url": "https://www.clearhome.cl",
                "telephone": "+56912345678",
                "priceRange": "$$"
            }
        </script>
        <!-- FontAwesome (keeping CDN for simplicity as requested/used in prototype, but could be replaced by an npm package) -->
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        />
        <!-- Google tag (gtag.js) -->
        <script
            async
            src="https://www.googletagmanager.com/gtag/js?id=AW-17833674787"
        ></script>
        <script is:inline>
            window.dataLayer = window.dataLayer || [];
            function gtag() {
                dataLayer.push(arguments);
            }
            gtag("js", new Date());

            gtag("config", "AW-17833674787");
        </script>
    </head>
    <body class="bg-gray-50 text-gray-700 antialiased font-sans">
        <slot />
        <style is:global>
            /* Custom Scrollbar for a more premium feel */
            ::-webkit-scrollbar {
                width: 10px;
            }
            ::-webkit-scrollbar-track {
                background: #f1f1f1;
            }
            ::-webkit-scrollbar-thumb {
                background: #003b6f;
                border-radius: 5px;
            }
            ::-webkit-scrollbar-thumb:hover {
                background: #0056b3;
            }

            /* Animation Utilities */
            .fade-in-section {
                opacity: 0;
                transform: translateY(20px);
                transition:
                    opacity 0.8s ease-out,
                    transform 0.8s ease-out;
                will-change: opacity, visibility;
            }
            .fade-in-section.is-visible {
                opacity: 1;
                transform: none;
            }
            .grecaptcha-badge {
                visibility: hidden;
            }
        </style>

        <script>
            // Simple Intersection Observer for Fade In Animations
            const observerOptions = {
                root: null,
                rootMargin: "0px",
                threshold: 0.1,
            };

            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach((entry) => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add("is-visible");
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);

            document.addEventListener("astro:page-load", () => {
                document
                    .querySelectorAll(".fade-in-section")
                    .forEach((section) => {
                        observer.observe(section);
                    });
            });

            // Initial run for first load (in case ViewTransitions aren't used but script runs)
            document.querySelectorAll(".fade-in-section").forEach((section) => {
                observer.observe(section);
            });
        </script>
    </body>
</html>
