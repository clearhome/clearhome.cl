---
import "@fontsource/inter";

interface Props {
    title: string;
    description?: string;
}

const {
    title,
    description = "Servicio de limpieza profesional para casas y oficinas en la IV Región. Personal de confianza, precios accesibles y garantía de satisfacción.",
} = Astro.props;
---

<!doctype html>
<html lang="es" class="scroll-smooth">
    <head>
        <meta charset="UTF-8" />
        <meta name="description" content={description} />
        <meta name="viewport" content="width=device-width" />
        <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
        <meta name="generator" content={Astro.generator} />
        <title>{title}</title>
        <!-- FontAwesome (keeping CDN for simplicity as requested/used in prototype, but could be replaced by an npm package) -->
        <link
            rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
        />
    </head>
    <body class="bg-gray-50 text-gray-700 antialiased font-sans">
        <slot />
        <style is:global>
            /* Custom Scrollbar for a more premium feel */
            ::-webkit-scrollbar {
                width: 10px;
            }
            ::-webkit-scrollbar-track {
                background: #f1f1f1;
            }
            ::-webkit-scrollbar-thumb {
                background: #003b6f;
                border-radius: 5px;
            }
            ::-webkit-scrollbar-thumb:hover {
                background: #0056b3;
            }

            /* Animation Utilities */
            .fade-in-section {
                opacity: 0;
                transform: translateY(20px);
                transition:
                    opacity 0.8s ease-out,
                    transform 0.8s ease-out;
                will-change: opacity, visibility;
            }
            .fade-in-section.is-visible {
                opacity: 1;
                transform: none;
            }
            .grecaptcha-badge {
                visibility: hidden;
            }
        </style>

        <script>
            // Simple Intersection Observer for Fade In Animations
            const observerOptions = {
                root: null,
                rootMargin: "0px",
                threshold: 0.1,
            };

            const observer = new IntersectionObserver((entries, observer) => {
                entries.forEach((entry) => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add("is-visible");
                        observer.unobserve(entry.target);
                    }
                });
            }, observerOptions);

            document.addEventListener("astro:page-load", () => {
                document
                    .querySelectorAll(".fade-in-section")
                    .forEach((section) => {
                        observer.observe(section);
                    });
            });

            // Initial run for first load (in case ViewTransitions aren't used but script runs)
            document.querySelectorAll(".fade-in-section").forEach((section) => {
                observer.observe(section);
            });
        </script>
    </body>
</html>
